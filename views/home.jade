extends layout

block content
  h1 Welcome #{user.name}
  #feed
    for post in posts
      .post(id=post._id)
        a(href='#removeModal', role="button", data-toggle="modal", data-id=String(post._id)).close.remove-post &times;
        h4 
          a(href='/course/'+post.course._id) #{post.course.name}
        p= post.message
        h6= post.from.name

  .modal.hide.fade#removeModal
    .modal-header
      button(type="button",data-dismiss="modal", aria-hidden="true").close &times;
      h3.modalLabel Remove Post
    .modal-body
      p You are about to remove this post. Are you sure?
      form(action='/remove-post', method='POST', style="display: none;")#remove-form
        input(type="hidden", name="id")#post-input
    .modal-footer
      button(type="button",data-dismiss="modal", aria-hidden="true").btn Cancel
      button(type="submit", form="remove-form").btn-danger.btn Delete

  script
    $(document).ready(function() {
      pollFeed();
      $('.remove-post').on('click', function() {
        var id = $(this).data('id');
        $('#post-input').val(id);
      });
    });